[
  {
    "current_expression": {
      "expr": "((size ex)[@env0 ])",
      "envs": {
        "env0": {
          "size": {
            "corec": [],
            "expr": {
              "expr":
                "fun bt ->\n  let rec loop cursor todos rep =\n    match cursor with\n    | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n    | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\n  loop bt [] 0",
              "envs": {}
            }
          },
          "ex": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((size)[@env1 ]) ((ex)[@env0 ])",
      "envs": {
        "env0": {
          "ex": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        },
        "env1": {
          "size": {
            "corec": [],
            "expr": {
              "expr":
                "fun bt ->\n  let rec loop cursor todos rep =\n    match cursor with\n    | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n    | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\n  loop bt [] 0",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun bt ->\n   let rec loop cursor todos rep =\n     match cursor with\n     | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n     | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\n   loop bt [] 0) ((ex)[@env0 ])",
      "envs": {
        "env0": {
          "ex": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun bt ->\n   let rec loop cursor todos rep =\n     match cursor with\n     | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n     | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\n   loop bt [] 0)\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil))))))",
      "envs": {}
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((let rec loop cursor todos rep =\n    match cursor with\n    | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n    | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\n  loop bt [] 0)\n[@env0 ])",
      "envs": {
        "env0": {
          "bt": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "let rec loop cursor todos rep =\n  match cursor with\n  | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n  | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\n((loop bt [] 0)[@env0 ])",
      "envs": {
        "env0": {
          "bt": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "let rec loop cursor todos rep =\n  match cursor with\n  | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n  | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\nloop ((bt)[@env0 ]) [] 0",
      "envs": {
        "env0": {
          "bt": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "let rec loop cursor todos rep =\n  match cursor with\n  | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n  | Node (_, l, r) -> loop l (r :: todos) (1 + rep) in\nloop\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0",
      "envs": {}
    },
    "step": [ "Let" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop\n    (Node\n       (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n         (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0)\n[@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ])\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ])\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ]))\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ]))\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ]))\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n  (Node\n     (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n       (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))) [] 0",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "cursor": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env4": {
          "cursor": {
            "corec": [],
            "expr": {
              "expr":
                "Node\n  (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n    (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Node\n        (2, (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))),\n          (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))))\nwith\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env2 ][@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env2": {
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          },
          "l": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          },
          "l": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env0 ])",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          },
          "l": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  ((1 + rep)[@env3 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env1": {
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  (1 + ((rep)[@env3 ]))",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env1": {
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))) (((r)\n  [@env0 ]) :: ((todos)[@env1 ])) (1 + ((rep)[@env2 ]))",
      "envs": {
        "env0": {
          "r": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  ((Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) :: ((todos)\n  [@env0 ])) (1 + ((rep)[@env1 ]))",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  (1 + ((rep)[@env0 ]))",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "0", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] (1 + 0)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ])\n  (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n  (Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "cursor": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env4": {
          "cursor": {
            "corec": [],
            "expr": {
              "expr": "Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Node (3, (Node (4, Nil, Nil)), (Node (5, Nil, Nil))) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env2 ][@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          },
          "l": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          },
          "l": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          },
          "l": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  ((1 + rep)[@env3 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  (1 + ((rep)[@env3 ]))",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (Node (4, Nil, Nil)) (((r)[@env0 ]) :: ((todos)[@env1 ]))\n  (1 + ((rep)[@env2 ]))",
      "envs": {
        "env0": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) (Node (4, Nil, Nil)) ((Node (5, Nil, Nil)) :: ((todos)\n  [@env0 ])) (1 + ((rep)[@env1 ]))",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  (1 + ((rep)[@env0 ]))",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  (1 + 1)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  2",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ])\n  (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  2",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  2",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  2",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  2",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n  (Node (4, Nil, Nil))\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  2",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env4": {
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (4, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Node (4, Nil, Nil) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env2 ][@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env2": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  ((1 + rep)[@env3 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  (1 + ((rep)[@env3 ]))",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) Nil (((r)[@env0 ]) :: ((todos)[@env1 ]))\n  (1 + ((rep)[@env2 ]))",
      "envs": {
        "env0": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) Nil (Nil :: ((todos)[@env0 ])) (1 + ((rep)[@env1 ]))",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] (1 + ((rep)[@env0 ]))",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "2", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] (1 + 2)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil\n  [Nil;\n  Node (5, Nil, Nil);\n  Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil;\nNode (5, Nil, Nil);\nNode (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [Nil;\n      Node (5, Nil, Nil);\n      Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\nwith\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env3 ]) ((x)[@env0 ]) ((xs)[@env1 ]) ((rep)[@env2 ])",
      "envs": {
        "env0": {
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) Nil ((xs)[@env0 ]) ((rep)[@env1 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) Nil\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  ((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) Nil\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil\n  [Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (5, Nil, Nil); Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [Node (5, Nil, Nil);\n      Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\nwith\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "x": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "x": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env3 ]) ((x)[@env0 ]) ((xs)[@env1 ]) ((rep)[@env2 ])",
      "envs": {
        "env0": {
          "x": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) (Node (5, Nil, Nil)) ((xs)[@env0 ]) ((rep)[@env1 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) (Node (5, Nil, Nil))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] ((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) (Node (5, Nil, Nil))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ])\n  (Node (5, Nil, Nil)) [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) (Node (5, Nil, Nil))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) (Node (5, Nil, Nil))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) (Node (5, Nil, Nil))\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n  (Node (5, Nil, Nil)) [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  3",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env4": {
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (5, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Node (5, Nil, Nil) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env2 ][@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  ((1 + rep)[@env3 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  (1 + ((rep)[@env3 ]))",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) Nil (((r)[@env0 ]) :: ((todos)[@env1 ]))\n  (1 + ((rep)[@env2 ]))",
      "envs": {
        "env0": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) Nil (Nil :: ((todos)[@env0 ])) (1 + ((rep)[@env1 ]))",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) Nil\n  [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  (1 + ((rep)[@env0 ]))",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "3", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) Nil\n  [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] (1 + 3)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) Nil\n  [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil\n  [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil\n  [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil\n  [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil\n  [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [Nil; Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env3 ]) ((x)[@env0 ]) ((xs)[@env1 ]) ((rep)[@env2 ])",
      "envs": {
        "env0": {
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) Nil ((xs)[@env0 ]) ((rep)[@env1 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) Nil [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  ((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) Nil [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]\n  4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil\n  [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": {
              "expr":
                "[Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))]",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))] with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "x": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "x": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env3 ]) ((x)[@env0 ]) ((xs)[@env1 ]) ((rep)[@env2 ])",
      "envs": {
        "env0": {
          "x": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) ((xs)\n  [@env0 ]) ((rep)[@env1 ])",
      "envs": {
        "env0": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) []\n  ((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) [] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ])\n  (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) [] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) [] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) [] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) [] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n  (Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))) [] 4",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "cursor": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env4": {
          "cursor": {
            "corec": [],
            "expr": {
              "expr": "Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil)))",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Node (6, (Node (7, Nil, Nil)), (Node (8, Nil, Nil))) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env2 ][@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          },
          "l": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          },
          "l": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env0 ])",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          },
          "l": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  ((1 + rep)[@env3 ])",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  (1 + ((rep)[@env3 ]))",
      "envs": {
        "env0": {
          "l": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (Node (7, Nil, Nil)) (((r)[@env0 ]) :: ((todos)[@env1 ]))\n  (1 + ((rep)[@env2 ]))",
      "envs": {
        "env0": {
          "r": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) (Node (7, Nil, Nil)) ((Node (8, Nil, Nil)) :: ((todos)\n  [@env0 ])) (1 + ((rep)[@env1 ]))",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) (Node (7, Nil, Nil)) [Node (8, Nil, Nil)]\n  (1 + ((rep)[@env0 ]))",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "4", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env0 ]) (Node (7, Nil, Nil)) [Node (8, Nil, Nil)] (1 + 4)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (Node (7, Nil, Nil)) [Node (8, Nil, Nil)] 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ])\n  (Node (7, Nil, Nil)) [Node (8, Nil, Nil)] 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) (Node (7, Nil, Nil)) [Node (8, Nil, Nil)] 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) (Node (7, Nil, Nil)) [Node (8, Nil, Nil)] 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) (Node (7, Nil, Nil)) [Node (8, Nil, Nil)] 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n  (Node (7, Nil, Nil)) [Node (8, Nil, Nil)] 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env4": {
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (7, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Node (7, Nil, Nil) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env2 ][@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  ((1 + rep)[@env3 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  (1 + ((rep)[@env3 ]))",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) Nil (((r)[@env0 ]) :: ((todos)[@env1 ]))\n  (1 + ((rep)[@env2 ]))",
      "envs": {
        "env0": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) Nil (Nil :: ((todos)[@env0 ])) (1 + ((rep)[@env1 ]))",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env1 ]) Nil [Nil; Node (8, Nil, Nil)] (1 + ((rep)[@env0 ]))",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) Nil [Nil; Node (8, Nil, Nil)] (1 + 5)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) Nil [Nil; Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil\n  [Nil; Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil [Nil; Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil [Nil; Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil [Nil; Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil\n  [Nil; Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Nil; Node (8, Nil, Nil)]", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [Nil; Node (8, Nil, Nil)] with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env3 ]) ((x)[@env0 ]) ((xs)[@env1 ]) ((rep)[@env2 ])",
      "envs": {
        "env0": {
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "xs": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) Nil ((xs)[@env0 ]) ((rep)[@env1 ])",
      "envs": {
        "env0": {
          "xs": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) Nil [Node (8, Nil, Nil)] ((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) Nil [Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil\n  [Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil [Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil [Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil [Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil\n  [Node (8, Nil, Nil)] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": {
            "corec": [],
            "expr": { "expr": "[Node (8, Nil, Nil)]", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [Node (8, Nil, Nil)] with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "x": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "x": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env3 ]) ((x)[@env0 ]) ((xs)[@env1 ]) ((rep)[@env2 ])",
      "envs": {
        "env0": {
          "x": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        },
        "env1": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) (Node (8, Nil, Nil)) ((xs)[@env0 ]) ((rep)[@env1 ])",
      "envs": {
        "env0": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) (Node (8, Nil, Nil)) [] ((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (Node (8, Nil, Nil)) [] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ])\n  (Node (8, Nil, Nil)) [] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) (Node (8, Nil, Nil)) [] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) (Node (8, Nil, Nil)) [] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) (Node (8, Nil, Nil)) [] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n  (Node (8, Nil, Nil)) [] 6",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env4": {
          "cursor": {
            "corec": [],
            "expr": { "expr": "Node (8, Nil, Nil)", "envs": {} }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Node (8, Nil, Nil) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env2 ][@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop l (r :: todos) (1 + rep))[@env0 ])",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          },
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) ((l)[@env0 ]) ((r :: todos)[@env1 ]) ((1 + rep)[@env2 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  ((1 + rep)[@env3 ])",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env4 ]) ((l)[@env0 ]) (((r)[@env1 ]) :: ((todos)[@env2 ]))\n  (1 + ((rep)[@env3 ]))",
      "envs": {
        "env0": {
          "l": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env3": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env4": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) Nil (((r)[@env0 ]) :: ((todos)[@env1 ]))\n  (1 + ((rep)[@env2 ]))",
      "envs": {
        "env0": {
          "r": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env2 ]) Nil (Nil :: ((todos)[@env0 ])) (1 + ((rep)[@env1 ]))",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) Nil [Nil] (1 + ((rep)[@env0 ]))",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "6", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) Nil [Nil] (1 + 6)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) Nil [Nil] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil \n  [Nil] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil [Nil] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil [Nil] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil [Nil] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil\n  [Nil] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[Nil]", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [Nil] with | [] -> ((rep)[@env0 ]) | x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env3 ]) ((x)[@env0 ]) ((xs)[@env1 ]) ((rep)[@env2 ])",
      "envs": {
        "env0": {
          "x": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        },
        "env1": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env2": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) Nil ((xs)[@env0 ]) ((rep)[@env1 ])",
      "envs": {
        "env0": {
          "xs": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) Nil [] ((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) Nil [] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun cursor ->\n    fun todos ->\n      fun rep ->\n        match cursor with\n        | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n        | Node (_, l, r) -> loop l (r :: todos) (1 + rep))[@env0 ]) Nil [] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   ((fun todos ->\n       fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n   [@env0 ])) Nil [] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     ((fun rep ->\n         match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n     [@env0 ])) Nil [] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       ((match cursor with\n         | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n         | Node (_, l, r) -> loop l (r :: todos) (1 + rep))\n       [@env0 ])) Nil [] 7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun cursor ->\n   fun todos ->\n     fun rep ->\n       match cursor with\n       | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n           [@env0 ])\n       | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ])) Nil []\n  7",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((match cursor with\n  | Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n      [@env0 ])\n  | Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env1 ]))\n[@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((cursor)[@env4 ]) with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env4": {
          "cursor": { "corec": [], "expr": { "expr": "Nil", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match Nil with\n| Nil -> (((match todos with | [] -> rep | x::xs -> loop x xs rep))\n    [@env1 ][@env0 ])\n| Node (_, l, r) -> ((loop l (r :: todos) (1 + rep))[@env3 ][@env2 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env3": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env1": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr":
        "((match todos with | [] -> rep | x::xs -> loop x xs rep)[@env0 ])",
      "envs": {
        "env0": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } },
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "match ((todos)[@env2 ]) with\n| [] -> ((rep)[@env0 ])\n| x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        },
        "env2": {
          "todos": { "corec": [], "expr": { "expr": "[]", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "match [] with | [] -> ((rep)[@env0 ]) | x::xs -> ((loop x xs rep)[@env1 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        },
        "env1": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun cursor ->\n  fun todos ->\n    fun rep ->\n      match cursor with\n      | Nil -> (match todos with | [] -> rep | x::xs -> loop x xs rep)\n      | Node (_, l, r) -> loop l (r :: todos) (1 + rep)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "Match" ]
  },
  {
    "current_expression": {
      "expr": "((rep)[@env0 ])",
      "envs": {
        "env0": {
          "rep": { "corec": [], "expr": { "expr": "7", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  { "current_expression": { "expr": "7", "envs": {} }, "step": [] }
]