[
  {
    "current_expression": {
      "expr": "((fact 5)[@env0 ])",
      "envs": {
        "env0": {
          "fact": {
            "corec": [],
            "expr": {
              "expr":
                "fun n ->\n  let rec loop n acc = if n = 0 then acc else loop (n - 1) (n * acc) in\n  loop n 1",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((fact)[@env0 ]) 5",
      "envs": {
        "env0": {
          "fact": {
            "corec": [],
            "expr": {
              "expr":
                "fun n ->\n  let rec loop n acc = if n = 0 then acc else loop (n - 1) (n * acc) in\n  loop n 1",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   let rec loop n acc = if n = 0 then acc else loop (n - 1) (n * acc) in\n   loop n 1) 5",
      "envs": {}
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((let rec loop n acc = if n = 0 then acc else loop (n - 1) (n * acc) in\n  loop n 1)\n[@env0 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "let rec loop =\n  ((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n  [@env1 ]) in\n((loop n 1)[@env0 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } },
        "env1": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "let rec loop =\n  ((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n  [@env1 ]) in\nloop ((n)[@env0 ]) 1",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } },
        "env1": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "let rec loop n acc = if n = 0 then acc else loop (n - 1) (n * acc) in\nloop ((n)[@env0 ]) 1",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "let rec loop n acc = if n = 0 then acc else loop (n - 1) (n * acc) in\nloop 5 1",
      "envs": {}
    },
    "step": [ "Let" ]
  },
  {
    "current_expression": {
      "expr": "((loop 5 1)[@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) 5 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])\n  5 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n -> ((fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n   [@env0 ])) 5 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> ((if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])) 5 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ])) 5 1",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ]))[@env1 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n = 0)[@env3 ])\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n)[@env3 ]) = 0\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "if 5 = 0 then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "if false then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        }
      }
    },
    "step": [ "If" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env0 ])",
      "envs": {
        "env0": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) ((n - 1)[@env0 ]) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (((n)[@env0 ]) - 1) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "5", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (((n)[@env0 ]) - 1) (((n)[@env1 ]) * ((acc)[@env2 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } },
        "env1": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (5 - 1) (((n)[@env0 ]) * ((acc)[@env1 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "5", "envs": {} } } },
        "env1": {
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) (5 - 1) (5 * ((acc)[@env0 ]))",
      "envs": {
        "env0": {
          "acc": { "corec": [], "expr": { "expr": "1", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (5 - 1) (5 * 1)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (5 - 1) 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) 4 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])\n  4 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n -> ((fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n   [@env0 ])) 4 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> ((if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])) 4 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ])) 4 5",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ]))[@env1 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n = 0)[@env3 ])\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "4", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n)[@env3 ]) = 0\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "4", "envs": {} } } }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "if 4 = 0 then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "if false then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        }
      }
    },
    "step": [ "If" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env0 ])",
      "envs": {
        "env0": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) ((n - 1)[@env0 ]) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "4", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (((n)[@env0 ]) - 1) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "4", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "4", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (((n)[@env0 ]) - 1) (((n)[@env1 ]) * ((acc)[@env2 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "4", "envs": {} } } },
        "env1": { "n": { "corec": [], "expr": { "expr": "4", "envs": {} } } },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (4 - 1) (((n)[@env0 ]) * ((acc)[@env1 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "4", "envs": {} } } },
        "env1": {
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) (4 - 1) (4 * ((acc)[@env0 ]))",
      "envs": {
        "env0": {
          "acc": { "corec": [], "expr": { "expr": "5", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (4 - 1) (4 * 5)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (4 - 1) 20",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) 3 20",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])\n  3 20",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n -> ((fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n   [@env0 ])) 3 20",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> ((if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])) 3 20",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ])) 3 20",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ]))[@env1 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n = 0)[@env3 ])\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "3", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n)[@env3 ]) = 0\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "3", "envs": {} } } }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "if 3 = 0 then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "if false then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        }
      }
    },
    "step": [ "If" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env0 ])",
      "envs": {
        "env0": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) ((n - 1)[@env0 ]) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "3", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (((n)[@env0 ]) - 1) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "3", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "3", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (((n)[@env0 ]) - 1) (((n)[@env1 ]) * ((acc)[@env2 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "3", "envs": {} } } },
        "env1": { "n": { "corec": [], "expr": { "expr": "3", "envs": {} } } },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (3 - 1) (((n)[@env0 ]) * ((acc)[@env1 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "3", "envs": {} } } },
        "env1": {
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) (3 - 1) (3 * ((acc)[@env0 ]))",
      "envs": {
        "env0": {
          "acc": { "corec": [], "expr": { "expr": "20", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (3 - 1) (3 * 20)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (3 - 1) 60",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) 2 60",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])\n  2 60",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n -> ((fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n   [@env0 ])) 2 60",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> ((if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])) 2 60",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ])) 2 60",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ]))[@env1 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n = 0)[@env3 ])\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "2", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n)[@env3 ]) = 0\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "2", "envs": {} } } }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "if 2 = 0 then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "if false then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        }
      }
    },
    "step": [ "If" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env0 ])",
      "envs": {
        "env0": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) ((n - 1)[@env0 ]) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "2", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (((n)[@env0 ]) - 1) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "2", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "2", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (((n)[@env0 ]) - 1) (((n)[@env1 ]) * ((acc)[@env2 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "2", "envs": {} } } },
        "env1": { "n": { "corec": [], "expr": { "expr": "2", "envs": {} } } },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (2 - 1) (((n)[@env0 ]) * ((acc)[@env1 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "2", "envs": {} } } },
        "env1": {
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) (2 - 1) (2 * ((acc)[@env0 ]))",
      "envs": {
        "env0": {
          "acc": { "corec": [], "expr": { "expr": "60", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (2 - 1) (2 * 60)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (2 - 1) 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) 1 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])\n  1 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n -> ((fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n   [@env0 ])) 1 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> ((if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])) 1\n  120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ])) 1\n  120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ]))[@env1 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n = 0)[@env3 ])\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "1", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n)[@env3 ]) = 0\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "1", "envs": {} } } }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "if 1 = 0 then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "if false then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "If" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "SubstCombine" ]
  },
  {
    "current_expression": {
      "expr": "((loop (n - 1) (n * acc))[@env0 ])",
      "envs": {
        "env0": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) ((n - 1)[@env0 ]) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "1", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (((n)[@env0 ]) - 1) ((n * acc)[@env1 ])",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "1", "envs": {} } } },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "1", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "((loop)[@env3 ]) (((n)[@env0 ]) - 1) (((n)[@env1 ]) * ((acc)[@env2 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "1", "envs": {} } } },
        "env1": { "n": { "corec": [], "expr": { "expr": "1", "envs": {} } } },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env3": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env2 ]) (1 - 1) (((n)[@env0 ]) * ((acc)[@env1 ]))",
      "envs": {
        "env0": { "n": { "corec": [], "expr": { "expr": "1", "envs": {} } } },
        "env1": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env1 ]) (1 - 1) (1 * ((acc)[@env0 ]))",
      "envs": {
        "env0": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env1": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (1 - 1) (1 * 120)",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) (1 - 1) 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr": "((loop)[@env0 ]) 0 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "SubstFun" ]
  },
  {
    "current_expression": {
      "expr":
        "((fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])\n  0 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n -> ((fun acc -> if n = 0 then acc else loop (n - 1) (n * acc))\n   [@env0 ])) 0 120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> ((if n = 0 then acc else loop (n - 1) (n * acc))[@env0 ])) 0\n  120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "(fun n ->\n   fun acc -> if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ])) 0\n  120",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        }
      }
    },
    "step": [ "ApplyFunComplete" ]
  },
  {
    "current_expression": {
      "expr":
        "((if n = 0 then acc else ((loop (n - 1) (n * acc))[@env0 ]))[@env1 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n = 0)[@env3 ])\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "0", "envs": {} } } }
      }
    },
    "step": [ "MoveDownSubst" ]
  },
  {
    "current_expression": {
      "expr":
        "if ((n)[@env3 ]) = 0\nthen ((acc)[@env2 ])\nelse ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env3": { "n": { "corec": [], "expr": { "expr": "0", "envs": {} } } }
      }
    },
    "step": [ "SubstVar" ]
  },
  {
    "current_expression": {
      "expr":
        "if 0 = 0 then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "ApplyFunRuntime" ]
  },
  {
    "current_expression": {
      "expr":
        "if true then ((acc)[@env2 ]) else ((loop (n - 1) (n * acc))[@env1 ][@env0 ])",
      "envs": {
        "env0": {
          "loop": {
            "corec": [ "loop" ],
            "expr": {
              "expr":
                "fun n -> fun acc -> if n = 0 then acc else loop (n - 1) (n * acc)",
              "envs": {}
            }
          }
        },
        "env1": {
          "n": { "corec": [], "expr": { "expr": "0", "envs": {} } },
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        },
        "env2": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "If" ]
  },
  {
    "current_expression": {
      "expr": "((acc)[@env0 ])",
      "envs": {
        "env0": {
          "acc": { "corec": [], "expr": { "expr": "120", "envs": {} } }
        }
      }
    },
    "step": [ "SubstVar" ]
  },
  { "current_expression": { "expr": "120", "envs": {} }, "step": [] }
]